# 第二章 物理层

## 2.1 通信基础

### 2.1.1 基本概念 P30

> * #### 数据、信号与码元
>
>   > 通信的目的是传送信息
>   >
>   > <font color=#3CB371 title='0,0'>数据 </font>是指传送信息的实体
>   >
>   > <font color=#3CB371 title='0,2'>信号</font> 是数据的电气或电磁表现，是数据在传输过程中的存在形式
>   >
>   > > 连续变化的数据或信号称为 <font color=#3CB371 title='0,0'>模拟数据（或模拟信号）</font>
>   > >
>   > > 取值仅允许为有限的几个离散数值（或信号）称为 <font color=#3CB371 title='0,0'>数字数据（或数字信号）</font>
>   >
>   > 数据传输方式可以分为串行传输和并行传输
>   >
>   > > <font color=#3CB371 title='-1,1'>串行传输</font> 指1比特1比特按照时间顺序传输
>   > >
>   > > <font color=#3CB371 title='-2,0'>并行传输</font> 指若干比特通过多条通信信道同时传输
>   >
>   > <font color=#3CB371 title='0,0'>码元</font> 是指用一个固定时长的信号波形（数字脉冲）表示一位k进制数字，代表不同离散数值的基本波形，是数字通信中数字信号的计量单位，这个时长内的信号称为<font color=#239080 title='0,0'>k进制码元</font>，该时长称为<font color=#3CB371 title='0,0'>码元宽度</font>
>
> * #### 信源、信道与信宿
>
>   > 数据通信是指数字计算机或其他数字终端之间的通信
>   >
>   > 一个通信系统主要划分为信源、信道和信宿三部分
>   >
>   > > <font color=#3CB371 title='0,0'>信源</font> 是产生和发送数据的源头
>   > >
>   > > <font color=#3CB371 title='0,0'>信宿 </font>是接收数据的终点
>   > >
>   > > <font color=#3CB371 title='0,9'>信道</font> 是信号的传输媒介
>   > >
>   > > > 按传输信号形式分类
>   > > >
>   > > > > 传送模拟信号的模拟信道
>   > > > >
>   > > > > 传送数字信号的数字信道
>   > > >
>   > > > 按传输介质分类
>   > > >
>   > > > > 无线信道
>   > > > >
>   > > > > 有线信道
>   > > >
>   > > > 信道上传送的信道有基带信道和宽带信道之分
>   > > >
>   > > > > <font color=#3CB371 title='-1,1'>基带传输</font>  将数字1、0直接用两种不同的电压表示，送到数字信道上传输
>   > > > >
>   > > > > <font color=#3CB371 title='-2,0'>宽带传输</font> 将基带信道进行<font color=#239080 title='0,0'>调制</font> 形成频分复用模拟信号，然后送到模拟信道上传输
>   >
>   > 从通信双方的交互方式看，可以分为三种基本方式
>   >
>   > > <font color=#3CB371 title='-1,2'>单向通信</font> 只有一个方向的通信而没有反方向的交互	如无线电广播、电视广播
>   > >
>   > > <font color=#3CB371 title='-2,1'>半双工通信</font> 通信的双方都可以发送或接收信息，此时需要两条信道
>   > >
>   > > <font color=#3CB371 title='-3,0'>全双工通信</font> 通信商法可以同时发送和接收信息，也需要两条信道
>   >
>   > <font color=#3CB371 title='0,0'>信道极限容量</font> 指信道的最高码元传输速率或信道的极限信息传输速率
>
> * #### 速率、波特与带宽
>
>   > <font color=#3CB371 title='0,5'>速率</font> 也称 <font color=#3CB371 title='0,4'>数据率</font> 指的是数据的传输速率，表示单位时间内传输的数据量，可以用码元传输速率和信息传输速率表示
>   >
>   > > <font color=#3CB371 title='0,0'>码元传输速率</font> 又称 <font color=#3CB371 title='0,0'>波特率</font> 表示单位时间内数字通信系统所传输的码元数（也可称为脉冲个数或信号变化的次数），单位为<font color=#800000 title='0,0'>波特（Baud）</font>，1波特表示数字通信系统每秒传输一个码元，码元可以是多进制的，码元速率与进制数无关
>   > >
>   > > <font color=#3CB371 title='0,0'>信息传输速率</font> 又称 <font color=#3CB371 title='0,0'>信息速率</font>、<font color=#3CB371 title='0,0'>比特率</font> 表示单位时间内数字通信系统传输的二进制码元个数，单位是比特/秒（b/s）
>   > >
>   > > <font color=#FF0000 title='0,0'>若一个码元携带n比特信息量，则M波特率的码元传输速率所对应的信息传输速率为Mn比特/秒</font>
>   > >
>   > > <font color=#3CB371 title='0,0'>带宽</font> 常用来表示网络的通信线路所能传输数据的能力，表示单位时间内从网络中的某一点到另一点所能通过的“最高数据率”，单位为b/s
>   > >
>   > > <font color=#FF0000 title='0,0'>波特率B与数据传输速率C的关系为 $ C = B log_2 {N}$，N为一个码元所取的离散值的个数</font>

### 2.1.2 奈奎斯特定理与香农定理 P32

> * #### <font color=#3CB371 title='0,8'>奈奎斯特定理</font>
>
>   > 信号中的许多高频分量往往不能通过信道，否则会在传输过程中衰减，导致接收端收到的波形失去码元之间的清晰界限，这种现象称为<font color=#3CB371 title='0,0'>码间串扰</font> 
>   >
>   > 又称<font color=#3CB371 title='-2,6'>奈氏准则</font> 它规定：在理想低通（没有噪声、带宽有限）的信道中，为了避免码间串扰，码元极限传输速率为2W波特，其中W是理想低通信道的带宽。若用V表示每个码元离散电平的数目（离散电平数目指有多少种不同的码元），则极限数据率为
>   >
>   > > <font color=#FFA07A title='-1,0'>理想低通信道下的极限数据传输速率 = $2Wlog_2 V$ 单位为b/s</font>
>   >
>   > 结论
>   >
>   > > 任何信道中，码元的传输速率是有上限的。
>   > >
>   > > 信道的频带越宽（即通过的信号高频分量越多），就可以用更高速率进行码元的有效传输
>   > >
>   > > 奈氏准则给出了码元传输速率的限制，但并未对信息的传输速率给出限制，即未对一个码元可以给出多少而二进制位给出限制
>   > >
>   > > 要提高数据传输速率，就必须设法使每个码元携带更多的比特信息量，此时就需要采用多元制的调制方法
>
> * #### <font color=#3CB371 title='0,8'>香农定理</font>
>
>   > 给出了带宽受限且有高斯白噪声干扰的信道的极限数据传输速率，当使用此速率进行传输时，可以做到不产生误差
>   >
>   > <font color=#FFA07A title='0,1'>信道的极限数据传输速率 = $Wlog_2 (1+\frac{S}{N})$ </font>
>   >
>   > > 式中，W为信道的带宽，S为信道所传输信号的平均功率，N为信道内部的高斯噪声功率。$\frac{S}{N}$ 为信噪比，即信号的平均功率与噪声的平均功率之比，单位为dB
>   >
>   > 结论
>   >
>   > > 信道的带宽或信道中的信噪比越大，信息的极限传输速率越高
>   > >
>   > > 对一定的传输带宽和一定的信噪比，信息的传输速率的上限是确定的
>   > >
>   > > 只要信息传输速率低于信道的极限传输速率，就能找到某种方法实现无差错的传输
>   > >
>   > > 香农定理的出的是极限信息传输速率，实际能达到的传输速率要低不少

### 2.1.3 编码与调制 P33

> <font color=#FFA500 title='0,0'>数字数据可以通过数字发送器转换为数字信号传输，也可以通过调制器转换成模拟信号传输</font>
>
> <font color=#FFA500 title='0,0'>模拟数据可以通过PCM编码器转换成数字信号传输，也可以通过放大器调制器转换成模拟信号传输</font>
>
> <font color=#3CB371 title='0,8'>编码</font> 把数据变换为数字信号的过程
>
> > 数字数据编码用于基带传输中
> >
> > <font color=#239080 title='-2,6'>常用数据编码规则图 P33</font>
> >
> > <font color=#3CB371 title='0,0'>归零编码</font> <font color=#800000 title='0,0'>RZ</font> 用高电平代表1、低电平代表0（或者相反），每个时钟周期中继均跳转到低电平（归零），接收方根据该跳变调整本方时钟基准，实现自同步机制，由于归零需要占用部分带宽，因此传输效率受到一定影响
> >
> > <font color=#3CB371 title='0,0'>非归零编码</font> <font color=#800000 title='0,0'>NRZ</font> 不用归零，一个周期全部用来传输数据，但NRZ无法传递时钟信号，双方难以同步，若想高速同步数据，需要带有时钟线
> >
> > <font color=#3CB371 title='0,0'>反向非归零编码</font> <font color=#800000 title='0,0'>NRZI</font> 利用信号翻转代表0，保持不变代表1。翻转信号本身可以作为一种通知机制，既能传输时钟信号，又尽量不损失系统带宽。例如<font color=#800000 title='0,0'>USB2.0</font>
> >
> > <font color=#3CB371 title='0,0'>曼彻斯特编码</font> 将一个码元分成两个相等的间隔，前高后低表示1，前低后高表示0，每个码元中间出现电平跳转，位中间的跳变既作为时钟信号，又作为数据信号，但它所占频带宽度时原始基带宽度的两倍。例如<font color=#239080 title='0,0'>以太网</font>
> >
> > <font color=#3CB371 title='0,0'>差分曼彻斯特编码</font> 常用于局域网传输，若码元为1，则前半个码元的电平与上一个码元的后半个码元的电平相同；若码元为0，则相反，在每个码元中间都有一次电平跳转，可以实现自同步，抗干扰性较好
> >
> > <font color=#3CB371 title='0,0'>4B/5B编码</font> 将欲发送的数据流的每4位做为一组，按照4B/5B编码规则转换成相应的5位码
>
> <font color=#3CB371 title='0,5'>调制</font> 把数据变换为模拟信号的过程
>
> > <font color=#239080 title='-1,4'>基本的数字调制方法 P34</font>
> >
> > > <font color=#3CB371 title='-2,3'>幅移键控</font> <font color=#800000 title='-2,3'>ASK</font>
> > >
> > > <font color=#3CB371 title='-3,2'>频移键控</font> <font color=#800000 title='-3,2'>FSK</font>
> > >
> > > <font color=#3CB371 title='-4,1'>相移键控</font> <font color=#800000 title='-4,1'>PSK</font>
> > >
> > > <font color=#3CB371 title='-5,0'>正交振幅调制</font> <font color=#800000 title='-5,0'>QAM</font>
>
> <font color=#239080 title='0,4'>模拟数据编码为数字信号</font>
>
> > 最典型的例子是用于对 <font color=#239080 title='-1,3'>音频信号</font> 进行编码的 <font color=#3CB371 title='-1,3'>脉码调制</font> <font color=#800000 title='-1,3'>PCM</font> 它主要包括三个步骤，即<font color=#239080 title='-1,3'>采样、量化和编码</font>
> >
> > > <font color=#3CB371 title='0,0'>采样</font> 假设原始信号最大频率为$f$，那么采样频率 $f_{采样} \geq 2f$ 才能保证采样后的数字信号完整保留原始的模拟信号，又<font color=#3CB371 title='0,0'>采样定理</font> 称 <font color=#3CB371 title='0,0'>奈奎斯特定理</font> ，采样是指对模拟信号进行周期性扫描，把时间上连续的信号变成时间上离散的信号
> > >
> > > <font color=#3CB371 title='0,0'>量化</font> 把采样取得的电平幅值按照一定的分级标度转化为对应的数字值并取整数
> > >
> > > <font color=#3CB371 title='0,0'>编码</font> 把量化的结果转换为与之对应的二进制编码
>
> <font color=#239080 title='0,0'>模拟数据调制为模拟信号</font> 可以使用<font color=#239080 title='0,0'>频分复用</font> <font color=#800000 title='0,0'>FDM</font> 技术，充分利用带宽资源

### 2.1.4 电路交换、报文交换与分组交换

> #### <font color=#3CB371 title='0,14'>电路交换</font> 
>
> > 在进行数据传输前，两个节点之间必须先建立一条专用（双方独占）的物理通信路径（有通信双方之间的交换设备和链路逐段连接而成），该路径中间可能经过许多中间节点
> >
> > 分为三个阶段：连接建立、数据传输和连接释放
> >
> > 优点：
> >
> > > * 通信时延小
> > > * 有序传输
> > > * 没有冲突
> > > * 适用范围广
> > > * 实时性强
> > > * 控制简单
> >
> > 缺点：
> >
> > > * 建立连接时间长
> > > * 线路独占
> > > * 灵活性差
> > > * 难以规格化
>
> #### <font color=#3CB371 title='0,10'>报文交换</font>
>
> > 数据交换的单位是报文，报文携带有目标地址、源地址等信息。报文交换在交换节点采用的是 <font color=#239080 title='-1,9'>存储转发</font> 的传输方式
> >
> > 优点
> >
> > > * 无需建立连接
> > > * 动态分配线路
> > > * 提高线路可靠性
> > > * 提高线路利用率
> > > * 提供多目标服务
> >
> > 缺点
> >
> > > * 由于数据进入交换节点后要经历存储、转发这一过程，因此会引起转发时延（包括接收报文、检验正确性、排队、发送时间等）
> > > * 报文交换对报文大小没有限制，这就要求网络结点需要有较大的缓存空间
>
> #### <font color=#3CB371 title='0,11'>分组交换</font>
>
> > 分组交换采用 <font color=#239080 title='-1,10'>存储转发</font> 方式，其限制了每次传送的数据块大小的上限，把大的数据块划分为合理的小数据块，再加上一些必要的控制信息（源地址、目的地址和编号信息等），构成分组。网络节点根据控制信息把分组送到下一个结点，下一个结点接收到分组后，暂时保存并排队等待传输，然后根据控制信息选择它的下一个结点，直到到达目的结点
> >
> > 优点
> >
> > > * 无建立时延
> > > * 线路利用率高
> > > * 简化了存储管理
> > > * 加速传输
> > > * 减少了出错概率和重发数据量
> >
> > 缺点
> >
> > > * 存在传输时延
> > > * 需要传输额外的信息
> > > * 采用数据包服务时可能出现失序、丢失或重复分组，分组到达结点时要对分组按编号排序；若采用<font color=#239080 title='-11,0'>虚电路服务</font> ，虽无失序问题，但有呼叫建立、数据传输和虚电路释放三个过程
>
> <font color=#FF0000 title='0,0'>传送数据量很大且其传送时间远大于呼叫时间时，采用电路交换较为合适；端到端的通路由多段链路组成时，采用分组交换合适；从提高整个网络的信道利用率上看，报文交换和分组交换优于电路交换，其中分组交换比报文交换的时延小，尤其适合于计算机之间的突发式数据通信</font>

### 2.1.5 数据报与虚电路 P39

> <font color=#239080 title='0,0'>分组交换</font> 根据其通信子网向端点提供的服务，还可以进一步分为 <font color=#239080 title='0,0'>面向连接的虚电路方式</font> 和 <font color=#239080 title='0,0'>无连接的数据报方式</font>
>
> > <font color=#3CB371 title='0,7'>数据报</font>
> >
> > > * 不需要建立连接
> > > * 传输不保证可靠性；为每个分组独立选择路由，不一定按序到达目的结点
> > > * 发送的分组中要包括发送端和接收端的完整地址，以便独立传输
> > > * 分组在交换节点存储转发时，要排队等候处理，会带来一定时延；交换结点通信量较大或网络发生拥塞时，时延会大大增加，交换节点可以根据情况丢弃部分分组
> > > * 网络具有冗余路径，对故障适应能力强
> > > * 存储转发的延时一般较小，提高了网络吞吐量
> > > * 收发双方不独占某条链路，资源利用率较高
> >
> > <font color=#3CB371 title='0,1'>虚电路</font>
> >
> > > 发送分组前需要建立一条逻辑上相连的虚电路，一旦连接建立，就固定了虚电路对应的物理路径。通信过程分为虚电路建立、数据传输与虚电路释放三个阶段
> >
> > <font color=#239080 title='-11,0'>数据报服务与虚电路服务的比较 P40</font>



## 2.2 传输介质

### 2.2.1 双绞线、同轴电缆、光纤与无线传输介质 P51

> #### <font color=#3CB371 title='0,9'>传输介质</font> 也称 <font color=#3CB371 title='0,9'>传输媒体</font> 是数据传输系统中发送设备和接收设备之间的物理通路
>
> > <font color=#3CB371 title='0,0'>导向传输介质</font> 电磁波被导向沿着固体媒介传播
> >
> > <font color=#3CB371 title='0,0'>非导向传输介质</font> 空气、真空或海水等
> >
> > > <font color=#3CB371 title='0,0'>双绞线</font> 外面加上屏蔽层就是<font color=#3CB371 title='0,0'>屏蔽双绞线</font>，无屏蔽层称为<font color=#3CB371 title='0,0'>非屏蔽双绞线</font> ，价格便宜，在局域网和传统电话网中普遍使用；距离太远时，对于模拟传输，要使用 <font color=#239080 title='0,0'>放大器</font> 放大衰减的信号；对于数字传输要用 <font color=#239080 title='0,0'>中继器</font> 将失真信号整形
> > >
> > > <font color=#3CB371 title='0,0'>同轴电缆</font> $50\Omega$ 主要用于传送基带数字信号，又称<font color=#3CB371 title='0,0'>基带同轴电缆</font>， $ 75\Omega$ 主要用来传输宽带信号，又称 <font color=#3CB371 title='0,0'>宽带同轴电缆</font>
> > >
> > > <font color=#3CB371 title='0,1'>光纤</font> 将不同角度入射的多条光线在同一根光纤中传输，称为<font color=#3CB371 title='0,1'>多模光纤</font> ，其只适合近距离传输；光纤直径减小到一个光的波长时，称为<font color=#3CB371 title='0,1'>单模光纤</font>，其适合远距离传输；
> > >
> > > > 传输损耗小、中继距离长，抗雷电和电磁干扰性能好、无串音干扰，保密性好，体积小，重量轻
> > >
> > > <font color=#3CB371 title='0,2'>无线电传输介质</font>
> > >
> > > > 无线电波
> > > >
> > > > 微波、红外线和激光

### 2.2.2 <font color=#3CB371 title='0,4'>物理层接口的特性</font> P54

> * 机械特性
> * 电气特性
> * 功能特性
> * 过程特性



## 2.3 物理层设备

### 2.3.1 <font color=#3CB371 title='0,4'>中继器</font> P56

> 主要功能是将信号整形并放大再转发出去，消除信号的失真和衰减，原理是信号再生而非简单放大
>
> 中继器两端的网络部分是网段而不是子网
>
> 在物理层工作，不能连接两个具有不同速率的局域网（没有存储转发功能）
>
> 串联的中继器不能超过4个，而且用4个中继器串联的5段通信介质中只有3段可以挂接计算机（<font color=#FF0000 title='0,0'>5-4-3规则</font>）

<font color=#FFA500 title='0,0'>放大器放大的是模拟信号（放大），中继器放大的是数字信号（整形再生）</font>

### 2.3.2 <font color=#3CB371 title='0,4'>集线器</font> P56

> 实质上是一个多端口中继器
>
> 同时多个端口输入会发生冲突，致使数据全都无效
>
> 目的指示扩大网络传输范围，不具备定向传送能力，信号传输的方向是固定的，是一个标准的共享式设备
>
> 不能分割 <font color=#239080 title='-4,0'>冲突域</font> 
