# 第一章 计算机网络体系结构

## 1.1 计算机网络概述

### 1.1.1 计算机网络的概念 P1

> #### <font color=#3CB371 title='0,1'>广义观点</font>
>
> 能实现远程信息处理的系统或能进一步达到资源共享的系统，都是计算机网络
>
> #### <font color=#3CB371 title='0,4'>资源共享观点</font>
>
> 计算机网络是“以能够相互共享资源的方式互联起来的自治计算机系统的集合“
>
> > 目的 —— 资源共享
> >
> > 组成单元 —— 分布在不同地理位置的堕胎独立的“自治计算机”
> >
> > 网络中计算机必须遵循的统一规则 —— 网络协议
>
> #### <font color=#3CB371 title='0,1'>用户透明性观点</font>
>
> 存在一个能为用户自动管理资源的网络操作系统，它能够调用用户所需要的资源，整个网络就像一个大的计算机系统一样对用户是透明的，描述了一个分布式的系统，它是网络未来发展和追求的目标

### 1.1.2 <font color=#3CB371 title='0,20'>计算机网络的组成</font> P2

> ####  <font color=#3CB371 title='0,7'>组成部分</font>
>
> > 主要由硬件、软件、协议三大部分组成
> >
> > <font color=#3CB371 title='0,1'>硬件</font> 
> >
> > > 主要由主机（端系统）、通信链路（如双绞线、光纤）、交换设备（如路由器、交换机等）和通信处理机（如网卡）等组成
> >
> > <font color=#3CB371 title='0,1'>软件</font>
> >
> > > 包括各种实现资源共享的软件和方便用户使用的各种工具软件，软件部分多属于应用层
> >
> > <font color=#3CB371 title='0,1'>协议</font>
> >
> > > 协议是计算机网络的核心，协议规定了网络传输数据时所遵循的规范
>
> #### <font color=#3CB371 title='0,5'>工作方式</font>
>
> > 可分为边缘部分和核心部分
> >
> > <font color=#3CB371 title='0,1'>边缘部分</font>
> >
> > > 由所有连接到因特网上、共用户直接使用的主机组成，用来进行通信和资源共享
> >
> > <font color=#3CB371 title='0,1'>核心部分</font>
> >
> > > 由大量的网络和连接这些网络的路由器组成，为边缘部分提供连通性和交换服务
>
> #### <font color=#3CB371 title='0,5'>功能组成</font>
>
> > 通信子网和资源子网
> >
> > > <font color=#3CB371 title='0,1'>通信子网</font>
> > >
> > > > 由各种传输介质、通信设备和相应的网络协议组成，它使网络具有数据传输、交换、控制和存储的能力，实现互联网计算机之间的数据通信
> > >
> > > <font color=#3CB371 title='0,1'>资源子网</font>
> > >
> > > > 是实现资源共享功能的设备及其软件的集合，向用户网络提供其他计算机上的硬件资源、软件资源和数据资源的服务

### 1.1.3 <font color=#3CB371 title='0,5'>计算机网络的功能</font> P2

> #### 数据通信
>
> #### 资源共享
>
> #### 分布式处理
>
> #### 提高可靠性
>
> #### 负载均衡

### 1.1.4 <font color=#3CB371 title='0,23'>计算机网络的分类</font> P3

> #### 按分布范围分类
>
> > 广域网 <font color=#800000 title='0,0'>WAN</font>
> >
> > 城域网 <font color=#800000 title='0,0'>MAN</font>
> >
> > 局域网 <font color=#800000 title='0,0'>LAN</font>
> >
> > 个人局域网 <font color=#800000 title='0,0'>PAN</font>
>
> #### 按传播技术分类
>
> > 广播式网络
> >
> > 点对点网络
>
> #### 按拓扑结构分类
>
> > 总线型网络
> >
> > 星形网络
> >
> > 环形网络
> >
> > 网状网络
>
> #### 按使用者分类
>
> > 公用网
> >
> > 专用网
>
> #### 按交换技术分类
>
> > 电路交换网络
> >
> > 报文交换网络
> >
> > 分组交换网络
>
> #### 按传输介质分类
>
> > 有线 
> >
> > 无线 

### 1.1.6 <font color=#3CB371 title='0,21'>计算机网络的性能指标</font> P5

> #### <font color=#3CB371 title='0,1'>带宽</font>
>
> > 在计算机网络中，带宽表示网络的通信线路所能传送数据的能力，单位是比特/秒（b/s）
>
> #### <font color=#3CB371 title='0,7'>时延</font>
>
> > 发送时延
> >
> > > <font color=#FFA07A title='-1,0'>发送时延=分组长度/信道宽度</font>
> >
> > 传播时延
> >
> > > <font color=#FFA07A title='-1,0'>传播时延=信道长度/电磁波在信道上的传播速率</font>
> >
> > 处理时延
> >
> > 排队时延
> >
> > <font color=#FFA07A title='-1,0'>总时延=发送时延+传播时延+处理时延+排队时延</font>
>
> #### <font color=#3CB371 title='0,2'>时延带宽积</font>
>
> > 发送端发送第一个比特即将到达终点时，发送端已经发送了多少个比特，又称以比特为单位的链路长度
> >
> > <font color=#FFA07A title='-2,0'>时延带宽积=传播时延 * 信道带宽</font>
>
> #### <font color=#3CB371 title='0,1'>往返时延</font> <font color=#800000 title='0,1'>RTT</font>
>
> > 从发送端发送数据开始到收到接受端的确认，总共经历的时延
>
> #### <font color=#3CB371 title='0,1'>吞吐量</font>
>
> > 单位时间内通过某个网络（或信道、接口）的数据量
>
> #### <font color=#3CB371 title='0,1'>速率</font>
>
> > 也称<font color=#3CB371 title='-1,0'>数据传输速率、数据率或比特率</font>，通常把最高数据传输率称为<font color=#3CB371 title='-1,0'>带宽</font>
>
> #### <font color=#3CB371 title='0,1'>信道利用率</font>
>
> > <font color=#FFA07A title='-1,0'>信道利用率=有数据通过时间/有+无）数据通过时间</font>



## 1.2 计算机网络体系结构与参考模型

### 1.2.1 计算机网络分层结构 P12

> #### 计算机网络的各层及其协议的集合称为<font color=#3CB371 title='0,0'>网络的体系结构</font>，是整个计算机网络及其所应完成功能的精确定义，体系结构是抽象的，而实现是具体的，是真正在运行的计算机硬件和软件
>
> #### <font color=#FFA500 title='0,0'>分层的基本原则 P12</font>
>
> #### 第n层中的活动元素通常称为<font color=#3CB371 title='0,0'>第n层实体</font>，不同机器上的同一层称为<font color=#3CB371 title='0,0'>对等层</font>，同一层的实体称为<font color=#3CB371 title='0,0'>对等实体</font>
>
> #### 计算机网络体系结构的各个层次中，每个<font color=#3CB371 title='0,0'>报文</font>都分为两部分 —— 一是数据部分，二是控制信息部分，他们共同组成PDU
>
> > <font color=#3CB371 title='0,0'>服务数据单元</font> <font color=#800000 title='0,0'>SDU</font> ：为完成用户所要求的功能而应传送的数据	第n层服务数据单元记为n-SDU
> >
> > <font color=#3CB371 title='0,0'>协议控制信息</font> <font color=#800000 title='0,0'>PCI</font> ：控制协议操作的信息	第n层协议控制信息记为n- PCI
> >
> > <font color=#3CB371 title='0,0'>协议数据单元</font> <font color=#800000 title='0,0'>PDU</font> ：对等层次之间传送的数据单位称为该层的PDU	第n层协议数据单元记为n-PDU
> >
> > <font color=#FFA07A title='-4,0'>n-SDU + n-PCI = n-PDU = (n-1)-SDU</font>
> >
> > <font color=#FF0000 title='0,0'>物理层的PDU称为比特，数据链路层的PDU称为帧，网络层的PDU称为分组，传输层的PDU称为报文段</font>
>
> #### <font color=#3CB371 title='0,4'>层次结构的含义</font>
>
> > * 第n层的实体不仅要使用第n-1层的服务来实现自身定义的功能，还要向第n+1层提供本层的服务，该服务是第n层及其下面各层提供服务的总和
> >
> > * 最底层只提供服务，是整个层次结构的基础；中间各层既是下一层服务的使用者，又是上一层服务的提供者；最高层面向用户提供服务
> > * 上一层只能通过相邻层间的接口使用下一层的服务，而不能调用其他层的服务；下一层所提供的服务实现细节对上一层透明
> > * 两台主机通信时，对等层在逻辑上有一条直接信道，表现为不经过下层就把信息传送到对方

### 1.2.2 计算机网络协议、接口、服务的概念 P14

> #### <font color=#3CB371 title='0,6'>协议</font>
>
> > * 协议，就是规则的集合；为进行网络中的数据交换而建立的规则、标准或约定称为<font color=#3CB371 title='0,0'>网络协议</font>，它是控制两个或多个对等实体进行通信的规则的集合，是水平的
> >
> > * 协议由语法、语义和同步三部分组成
> >
> >   > <font color=#3CB371 title='-1,3'>语法</font> 规定了传输数据的格式
> >   >
> >   > <font color=#3CB371 title='-2,2'>语义</font> 规定了所要完成的功能
> >   >
> >   > <font color=#3CB371 title='-3,1'>同步</font> 规定了执行各种操作的条件、时序关系等
> >   >
> >   > <font color=#FF0000 title='0,0'>一个完整的协议通常具有线路管理(建立、释放连接)、差错控制、数据转换等功能</font>
>
> #### <font color=#3CB371 title='0,3'>接口</font>
>
> > * 接口是同一结点内相邻两层间交换信息的连接点，是一个系统内部的规定
> > * <font color=#FF0000 title='0,0'>每层只能为紧邻的层次之间定义接口，不能跨层定义接口</font>
> > * 同一结点相邻两层的实体通过<font color=#3CB371 title='0,0'>服务访问点</font> <font color=#800000 title='0,0'>SAP</font>进行交互
>
> #### <font color=#3CB371 title='0,7'>服务</font>
>
> * 服务是指下层为紧邻的上层提供的功能调用，它是垂直的
>
> * 上层使用下层所提供的服务时必须与下层交换一些命令，这些命令在OSI参考模型中称为<font color=#3CB371 title='0,5'>服务原语</font>，划分为4类
>
>   > <font color=#FFA500 title='-1,4'>请求</font> 服务用户发往服务提供者	请求完成某项工作
>   >
>   > <font color=#FFA500 title='-2,3'>指示</font> 服务提供者发往服务用户	指示用户做某件事
>   >
>   > <font color=#FFA500 title='-3,2'>响应</font> 服务用户发往服务提供者	作为对知识的响应
>   >
>   > <font color=#FFA500 title='-4,1'>证实</font> 服务提供者发往服务用户	作为对请求的证实
>   >
>   > <font color=#FF0000 title='0,0'>有应答服务包括全部4类原语，无应答服务只包括请求和指示两类原语</font>
>
> #### <font color=#FF0000 title='0,0'>下面的协议对上层的服务用户是透明的，服务是由下层通过层间接口向上层提供的，只有能被高一层“看的见”的功能才称为服务</font>
>
> #### <font color=#3CB371 title='0,21'>计算机网络提供的服务分类</font>
>
> * ##### 面向连接服务与无连接服务
>
>   > <font color=#3CB371 title='0,3'>面向连接服务</font> 
>   >
>   > > * 通信前双方必须先建立连接，分配相应的资源，以保证通信能正常进行，传输结束后释放连接和所占用的资源
>   > > * 分为连接建立、数据传输和连接释放三个阶段
>   > > * 例如 <font color=#239080 title='-3,0'>TCP</font>
>   >
>   > <font color=#3CB371 title='0,3'>无连接服务</font>
>   >
>   > > * 通信前双方不需要先建立连接，需要发送数据时可直接发送，把每个带有目的地址的包（报文分组）传送到线路上，由系统选定路线进行传输
>   > > * 这是一种不可靠的服务，通常被描述为“尽最大努力交付”
>   > > * 例如 <font color=#239080 title='-3,0'>IP</font> <font color=#239080 title='-3,0'>UDP</font>
>
> * ##### 可靠服务和不可靠服务
>
>   > <font color=#3CB371 title='0,1'>可靠服务</font>
>   >
>   > > 网络具有纠错、检错、应答机制，能保证数据正确、可靠地传送到目的地
>   >
>   > <font color=#3CB371 title='0,1'>不可靠服务</font>
>   >
>   > > 其网络的正确性、可靠性要由应用或用户来保障
>
> * ##### 有应答服务和无应答服务
>
>   > <font color=#3CB371 title='0,2'>有应答服务</font>
>   >
>   > > * 接收方在接收到数据后想发送方给出相应的应答，该应答由传输系统内部自动实现
>   > > * 例如 <font color=#239080 title='-2,0'>文件传输服务</font>
>   >
>   > <font color=#3CB371 title='0,2'>无应答服务</font>
>   >
>   > > * 接收方收到数据后不自动给出应答
>   > > * 例如 <font color=#239080 title='-2,0'>WWW服务</font>

### 1.2.3 ISO/OSI参考模型和TCP/IP模型 P16

> #### <font color=#3CB371 title='0,6'>OSI参考模型</font>
>
> > * 国际化标准组织 <font color=#800000 title='0,0'>ISO</font> 提出的网络体系结构模型，称为<font color=#3CB371 title='-1,5'>开放系统互连参考模型</font> <font color=#800000 title='-1,5'>OSI/RM</font>
> >
> > * 有7层，至下而上依次为物理层、数据链路层、网络层、传输层、会话层、表示层、应用层
> >
> >   > 低三层统称<font color=#3CB371 title='-1,3'>通信子网</font>，它是为了联网而附加的通信设备，完成数据的传输功能
> >   >
> >   > 高三层统称<font color=#3CB371 title='-2,2'>资源子网</font>，它相当于计算机系统，完成数据的处理等功能
> >   >
> >   > 传输层承上启下
> >   >
> >   > 层次结构图 P16
> >
> > * <font color=#3CB371 title='0,9'>物理层</font>
> >
> >   > 传输单位是比特
> >   >
> >   > 任务是透明的传输比特流
> >   >
> >   > 功能是在物理媒体上为数据端设备透明的传输原始比特流
> >   >
> >   > 主要定义<font color=#239080 title='-4,5'>数据终端设备</font> <font color=#800000 title='-4,5'>DTE</font> 和 <font color=#239080 title='-4,5'>数据通信设备</font> <font color=#800000 title='-4,5'>DCE</font>的物理与逻辑连接方法
> >   >
> >   > 物理层协议也称<font color=#3CB371 title='-5,4'>物理层接口标准</font>
> >   >
> >   > 早期通信规则称为<font color=#3CB371 title='0,0'>规程</font>，因此物理层协议也称<font color=#3CB371 title='0,0'>物理层规程</font>
> >   >
> >   > 物理层规定了通信链路与通信结点连接所需的电路接口
> >   >
> >   > 物理层规定了通信链路上传输的信号的意义和电气特征
> >   >
> >   > 物理层接口标准EIA-232C、EIA/TIA RS-499 、CCITT的X.21 等
> >
> > * <font color=#3CB371 title='0,5'>数据链路层</font>
> >
> >   > 传输单位是帧
> >   >
> >   > 任务是将网络层传来的IP数据报组装成帧
> >   >
> >   > 功能可以概括为成帧、差错控制、流量控制和传输管理
> >   >
> >   > 特殊子层 <font color=#3CB371 title='0,0'>介质访问子层</font> 专门用于控制对广播式网络共享信道的访问
> >   >
> >   > 数据链路层典型协议有<font color=#800000 title='0,0'>SDLC</font>、<font color=#800000 title='0,0'>HDLC</font>、<font color=#800000 title='0,0'>PPP</font>、<font color=#800000 title='0,0'>STP</font>和<font color=#800000 title='0,0'>帧中继</font>
> >
> > * <font color=#3CB371 title='0,4'>网络层</font>
> >
> >   > 传输单位是数据报
> >   >
> >   > 主要任务是把网络层的协议数据单元（分组）从源端传到目的端，为分组交换网上的不同主机提供通信服务
> >   >
> >   > 关键问题是对分组进行路由选择，并实现流量控制、拥塞控制、差错控制和忘机互联等功能
> >   >
> >   > 网络层协议有<font color=#800000 title='0,0'>IP</font>、<font color=#800000 title='0,0'>IPX</font>、<font color=#800000 title='0,0'>ICMP</font>、<font color=#800000 title='0,0'>IGMP</font>、<font color=#800000 title='0,0'>ARP</font>、<font color=#800000 title='0,0'>RARP</font>、<font color=#800000 title='0,0'>OSPF</font>等
> >
> > * <font color=#3CB371 title='0,4'>传输层</font>
> >
> >   > 传输层传输单位是报文段（<font color=#800000 title='0,0'>TCP</font>）或用户数据报（<font color=#800000 title='0,0'>UDP</font>）
> >   >
> >   > 传输层负责主机中两个进程之间的通信
> >   >
> >   > 功能是为端到端连接提供可靠的传输服务，为端到端连接提供流量控制、差错控制、服务质量、数据传输管理等服务
> >   >
> >   > 传输层协议有<font color=#800000 title='0,0'>TCP</font>、<font color=#800000 title='0,0'>UDP</font>
> >
> >   <font color=#FF0000 title='0,0'>数据链路层提供的是点到点的通信（主机到主机之间的通信，参与通信的主机通过硬件地址或IP地址标识），传输层提供的是端到端的通信（运行在不同主机内的两个进程之间的通信，一个进程由一个端口标识）</font>
> >
> > * <font color=#3CB371 title='0,4'>会话层</font>
> >
> >   > 会话层允许不同主机上的各个进程之间进行通话
> >   >
> >   > 会话层为表示层实体或用户建立连接并在连接上有序的传输数据，这就是<font color=#3CB371 title='0,0'>会话</font>，也称<font color=#3CB371 title='0,0'>建立同步</font> <font color=#800000 title='-2,2'>SYN</font>
> >   >
> >   > 负责管理主机间的会话进程，包括建立、管理及终止进程间的会话
> >   >
> >   > 可以使用校验点使通信会话在失效时从校验点继续恢复通信，实现数据同步
> >
> > * <font color=#3CB371 title='0,3'>表示层</font>
> >
> >   > 主要处理两个通信系统中交换信息的表示方式
> >   >
> >   > 采用抽象的标准方法定义数据结构，并采用标准的编码形式
> >   >
> >   > 数据压缩、加密和解密也是表示层可提供的数据表示变换功能
> >
> > * <font color=#3CB371 title='0,3'>应用层</font>
> >
> >   > 是参考模型的最高层，是用户与网络的洁面
> >   >
> >   > 为特定类型的网络应用提供访问参考模型环境的手段
> >   >
> >   > 应用层典型协议有<font color=#800000 title='0,0'>FTP</font>、<font color=#800000 title='0,0'>SMTP</font>、<font color=#800000 title='0,0'>HTTP</font>
>
> #### <font color=#3CB371 title='0,11'>TCP/IP模型</font>
>
> > * <font color=#800000 title='0,0'>ARPA </font> 在研究 <font color=#800000 title='0,0'>ARPAnet</font> 时提出了 <font color=#800000 title='0,0'>TCP/IP</font> 模型，从低到高依次为网络接口层、网际层、传输层和应用层
> >
> > * <font color=#3CB371 title='0,1'>网络接口层</font>
> >
> >   > 类似于物理层和数据链路层
> >
> > * <font color=#3CB371 title='0,1'>网际层</font>
> >
> >   > 类似于网络层
> >
> > * <font color=#3CB371 title='0,3'>传输层</font>
> >
> >   > 类似于传输层
> >   >
> >   > <font color=#3CB371 title='0,0'>传输控制协议</font> <font color=#800000 title='0,0'>TCP</font> 面向连接，传输单位是报文段，能提供可靠交付
> >   >
> >   > <font color=#3CB371 title='0,0'>用户数据报协议</font> <font color=#800000 title='0,0'>UDP</font>  无连接，传输单位是用户数据报，不保证提供可靠交付
> >
> > * <font color=#3CB371 title='0,1'>应用层</font>
> >
> >   > 包含所有高层协议
>
> #### <font color=#3CB371 title='0,7'>TCP/IP 与 OSI 参考模型的比较</font>
>
> * 二者都采取分层的体系结构
> * 二者都是基于独立的协议栈的概念
> * 二者都可以解决异构网络的互联，实现世界上不同厂家生产计算机之间的通信
> * OSI精确的定义了服务、协议与接口的概念，符合面向对象程序设计的思想，而TCP/IP不符合软件工程思想
> * OSI模型产生在协议发明之前，没有偏向特定的协议，通用性良好
> * TCP/IP设计之初考虑到了多种异构网络的互联问题，将网际协议作为一个单独的重要层次
> * OSI支持无连接和面向连接的通信，但传输层仅有面向连接的通信；TCP在网际层仅有一种无连接通信模式，但传输层支持无连接和面向连接两种模式